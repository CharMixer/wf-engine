name: Backup
steps:
  -
    id: fetch_vm_snapshots
    name: "Fetch VM snapshots"
    post_events:
      - fetch_vm_snapshots
    pre_events: []
  -
    id: fetch_data
    name: "Fetch data"
    post_events:
      - fetch_data
    pre_events: []
  -
    id: encrypt
    name: Encrypt
    post_events:
      - encrypt
    pre_events:
      - fetch_vm_snapshots
      - fetch_data
  -
    id: compress
    name: Compress
    post_events:
      - compress
    pre_events:
      - encrypt
  -
    id: upload
    name: Upload
    post_events:
      - upload
    pre_events:
      - compress
  -
    id: clean
    name: Clean
    post_events:
      - fetch_data
    pre_events: []
  -
    id: encrypt
    name: Encrypt
    post_events:
      - encrypt
    pre_events:
      - fetch_vm_snapshots
      - fetch_data
  -
    id: compress
    name: Compress
    post_events:
      - compress
    pre_events:
      - encrypt
  -
    id: upload
    name: Upload
    post_events:
      - upload
    pre_events:
      - compress
  -
    id: clean
    name: Clean
    post_events:
      - clean
    pre_events:
      - upload
